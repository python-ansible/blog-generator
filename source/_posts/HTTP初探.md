---
title: 'HTTP初探'
date: 2019-01-05 14:27:41
tags: '基础知识'
---

讲真，在工作初期http一直是一个痛点，在与后台开发交互的过程中，经常会要求在请求头中做一些特殊处理完成一些骚操作，而连请求头都搞不清楚的我只能选择狗带。

那么最近学习了http以及服务器相关的知识，感觉和后端交互以及调试api已经不在话下了，接下来就介绍一下最近的学习成果吧。

## URL
什么是URL呢？URL全称叫做统一资源定位符，顾名思义，它确定了一个统一的网址以供我们访问。所以我们才能看到我们想要网页。

一个url包括了五部分，分别是协议，域名，路径，查询参数，以及锚点。
![http示例](/assets/http/url.png)

- 常见的协议有http,https,ftp等等比如其中的https协议叫做超文本传输安全协议，这个东东是在http之上加上了加密处理以及完整性保护。是一种较为安全的网络协议，其他的协议这里就不一一例举了。

- 说到域名不得不提DNS，我们在访问百度的时候我们只访问了一台对应的服务器，别人访问的可能会是另一台。但他们都指向百度这个网页。那我们怎么能确定我们访问的是哪台服务器呢？是根据这台服务器的ip，而这台服务器的ip是DNS返回给我们的，DNS的作用就是接受一个域名，返回一个ip。而域名从后往前，根据”.“号分割，分别被称为一级域名，二级域名以及三级域名，比如在`www.baidu.com`中。`.com`属于一级域名，`baidu`属于二级域名，而`www`属于三级域名。(这里还有个黑科技，通过sudo vi /etc/hosts可以指定访问的ip）。

- 路径需要知道的是它只是一个路径而已，并不对应任何文件，比如/index.html，并不代表真的有index.html这个文件。

- 查询参数很容易理解，就比如我们在用百度搜索的时候表单中填入的东西，在发送http请求的时候就会被url放在这里带过去。

- 锚点其实就是通过`<a></a>`标签实现的一个定位的东东，主要用于页内跳转和跳转到其他页面的某个区域。

## 在Chrome中查看HTTP请求以及HTTP响应
在我们输入一个使用http协议的URL按下回车的时候，服务器与浏览器交互有四个过程
1. 浏览器发起请求
2. 服务器80端口接收请求
3. 服务器返回内容
4. 浏览器下载
在这个工程中http指导浏览器与服务器之间的沟通。

那么。我们要如何在Chrome中查看HTTP请求及响应的内容呢

首先，在一个空白页中右键，点击检查
![点击检查](/assets/http/request1.png)

----
之后，点击Network
![点击Network](/assets/http/request2.png)


----
之后在Name栏中选择一个Get请求并点击Request Headers旁边的view source
![点击view source](/assets/http/request3.png)


----
这样就看到了一个完整的HTTP请求内容
![http请求](/assets/http/request4.png)


----
HTTP响应的内容只要点击Response Headers旁边的view source就能看到了
![http响应](/assets/http/response.png)

## HTTP请求和响应的组成
为了说明HTTP请求以及响应的组成，我们使用curl命令访问`www.baidu.com`

![curl命令](/assets/http/curl.png)

curl命令是一个利用URL规则在命令行下工作的文件传输工具,下面说明一下图中这些参数的用途
- -s 为了不显示进度条
- -v 显示请求和响应(默认只显示响应)
- -H 添加请求头
- -X 指定动作
- -d 添加参数

那么HTTP请求就是左侧带有`>`的部分啦
![HTTP请求组成](/assets/http/curl1.png)

一个HTTP请求由最多四部分，最少三部分组成。
- 第一个部分指定了动作，路径和协议版本，图中我们就用了POST这个动作，路径是/，协议是HTTP/1.1,这里需要注意，路径在协议中规定以/开头，是会自动补全的，并且路径包含了查询参数，但不包含锚点
- 第二部分是各种请求头的参数，以key:value的形式显示，例如图中的Content-Type就指定了上传数据的格式，也就是第四部分的格式。
- 第三部分永远是一个回车，用来分割第二部分与第四部分
- 第四部分是要上传的数据，本例没有给出，它不是必须的。

同样，一个HTTP响应也有四部分组成，左侧带有`<`的部分就是HTTP响应
![HTTP响应组成](/assets/http/curl2.png)

HTTP响应的2，3，4部分和HTTP请求是一致的，唯一不同的是第一部分，HTTP响应的第一部分显示了协议/版本号，状态码，以及状态解释。本例中的状态码为302，状态解释为Found，它代表了该资源原本确实存在,但已经被临时改变了位置。一般在请求成功时我们获得的状态码是200，错误却各种各样，关于状态码的相关知识请自行谷歌。

知道了这些，大概不会被喷了吧😀
